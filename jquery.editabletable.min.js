(function(a){a.fn.ediTableTable=function(b){b=a.extend({data:{},items:[],item_name:"Item",value_key:"value"},b);if(!b.add_url){throw"EdiTableTable Exception: You must supply an add_url!"}if(!b.delete_url){throw"EdiTableTable Exception: You must supply a delete_url"}if(!b.edit_url){throw"EdiTableTable Exception: You must supply an edit_url!"}var f=this;var h={container:' 				<div class="editable-container"> 					<table class="bordered zebra-striped editable-items"> 					<% for (var i in options.items) { %> 						<%= templates.row({ item: options.items[i], options: options }) %> 					<% } %> 					</table> 					<button id="btn-new" class="btn primary large btn-new">New <%= options.item_name %></button> 					<div class="new-controls"> 						<input class="txt-new" /> 						<button class="btn primary btn-new-submit">Create <%= options.item_name %></button> 					</div> 				</div>',row:' 				<tr> 					<td> 						<span class="item-name" data-item-id="<%= item.id %>"><%= item[options.value_key] %></span> 						<div class="hover-controls"> 							<button class="btn primary btn-save">Save</button> 							<button class="btn secondary btn-edit">Edit</button> 							<button class="btn error btn-delete">Delete</button> 						</div> 					</td> 				</tr>'};function g(i){var j=b.data;j[b.value_key]=i;a.post(b.add_url,j,function(k){k=JSON.parse(k);f.find("table").append(d.row({item:{id:k.id,name:i},options:b}));f.find(".txt-new").val("");f.find(".new-controls").hide();f.find(".btn-new").fadeIn("fast")})}function e(i){var j=a(i).find("input").val();var k={id:a(i).data("item-id")};k[b.value_key]=j;a.post(b.edit_url,k,function(l){a(i).html(j).css({padding:"5px"}).find("input").hide();a(i).parent().find(".btn-save").hide();a(i).parent().find(".btn-edit").show()})}this.on("click.editableTable",".editable-items .btn-edit",function(){var i=a(this).parent().siblings(".item-name");a(i).html('<input value="'+a(i).text()+'" />').css({padding:0});a(i).parent().find(".btn-save").show();a(i).parent().find(".btn-edit").hide()});this.on("dblclick.editableTable",".editable-items .item-name",function(){a(this).html('<input value="'+a(this).text()+'" />').css({padding:0});a(this).find(".btn-save").show();a(this).find(".btn-edit").hide()});this.on("click.editableTable",".editable-items .btn-delete",function(){var i=a(this).parent().siblings(".item-name");a.post(b.delete_url,{id:a(i).data("item-id")},function(j){a(i).parents("tr").fadeOut("fast",function(){a(this).remove()})})});this.on("click.editableTable",".editable-items .btn-save",function(){save_label(a(this).parent().siblings(".item-name"))});this.on("keypress.editableTable",".editable-items input",function(i){if(i.which==13){e(a(this).parent())}});this.on("click.editableTable",".btn-new",function(){a(this).hide();a(this).siblings(".new-controls").fadeIn("fast")});this.on("click.editableTable",".btn-new-submit",function(){g(a(this).siblings(".txt-new").val())});this.on("keypress.editableTable",".new-controls input",function(i){if(i.which==13){g(a(this).val())}});var d={};for(var c in h){d[c]=_.template(h[c])}this.append(d.container({options:b,templates:d}));return this}})(jQuery);